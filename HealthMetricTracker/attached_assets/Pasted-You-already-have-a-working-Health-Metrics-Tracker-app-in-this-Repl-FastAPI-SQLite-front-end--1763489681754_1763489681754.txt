You already have a working “Health Metrics Tracker” app in this Repl (FastAPI + SQLite + front end) with:

- daily_metrics and calorie_entries tables
- user_settings (maintenance_calories, current_mode, deficits)
- Today + History tabs
- CBT-E food journal
- some weekly/monthly stats

You recently added documentation about dynamic targets, rolling averages etc, but the actual code and UI haven’t changed (0 changes applied to the repl). 

Now please MODIFY THE CODE (backend and frontend) to implement the changes below. Do not just update documentation; actually change Python and frontend files and apply them.

==================================================
1. CLEAR TEST DATA FOR A GIVEN DAY
==================================================

Backend:

1. Add an endpoint: DELETE /api/daily-data/{date_str}

   - date_str in YYYY-MM-DD.
   - Delete the daily_metrics row for that date if it exists.
   - Delete all calorie_entries rows for that date.
   - Return JSON with counts of deleted rows.

Frontend:

2. Near the date selector on the Today tab, add a small “Clear this day” button.

   - When clicked, show a confirm dialog (“Delete all entries and metrics for this date?”).
   - On confirm, call DELETE /api/daily-data/{date}.
   - After success, clear the local state for that date (daily metrics form and food entries) and refresh the Today summary.

==================================================
2. DYNAMIC CALORIE TARGET BASED ON HISTORIC BURN
==================================================

Implement REAL dynamic targets instead of a mostly static number.

Backend:

1. In user_settings add:

   - maintenance_window_days: int, default 21
   - loss_gentle_percent: float, default 0.10
   - loss_standard_percent: float, default 0.15
   - loss_aggressive_percent: float, default 0.20

   Expose them in GET/POST /api/settings.

2. Implement a helper (e.g. in a utils module) that, for a given date:

   - Looks back maintenance_window_days days in daily_metrics.
   - Computes rolling_burn_avg as the average of calories_burned_total for days with non-null values.
   - If fewer than 7 valid days exist, fall back to maintenance_calories from settings.

3. When computing / updating daily_calorie_target for a date:

   - Base maintenance = rolling_burn_avg (or maintenance_calories fallback).
   - If mode == "maintenance": target = maintenance.
   - If mode == "loss_gentle": target = maintenance * (1 - loss_gentle_percent).
   - If mode == "loss_standard": target = maintenance * (1 - loss_standard_percent).
   - If mode == "loss_aggressive": target = maintenance * (1 - loss_aggressive_percent).
   - Clamp target to a minimum of 1500 kcal.
   - Store target in daily_metrics.daily_calorie_target.

4. Recalculate daily_calorie_target whenever ANY of these change:

   - calories_burned_total for that date (upsert daily metrics)
   - mode for that date
   - user_settings values that affect maintenance or loss percentages
   - maintenance_window_days

   You can centralise this in a “recalculate_daily_target_for_date(date)” helper and call it in the relevant code paths.

5. In the summary API (GET /api/daily-summary/{date}) include:

   - rolling_burn_avg
   - the final dynamic daily_calorie_target
   - the mode and the percent deficit used.

   Make the summary_text explain this in plain English, e.g.:

   “Based on an average burn of 3,100 kcal/day over the last 21 days, your maintenance is ~3,100 kcal. In standard loss mode (15% deficit), today’s target is 2,635 kcal.”

==================================================
3. SIMPLIFY INTERACTION & AUTO-UPDATE
==================================================

I want the flow to be: choose date → enter weight/steps/burn → log food → everything updates instantly.

Frontend changes (Today tab):

1. Remove the need to click the big red “Save Metrics” to commit changes.

   - For the daily metrics form (mode, steps, weight_kg, total_calories_burned, protein_target_g, etc.), send an upsert request to the daily-metrics API whenever a field loses focus or after a short debounce (e.g. 500ms) after typing.
   - After each successful save, refresh the Today summary and any dependent charts/stats.

2. Add a tiny status text next to the date selector, e.g.:

   - “All changes saved” when last save succeeded.
   - “Saving…” while a request is in flight.
   - “Error saving” if the last request failed.

3. For food journal entries for the selected date:

   - After adding or deleting an entry, refresh the Today summary so calories eaten, balance and protein numbers update automatically.

==================================================
4. PLAIN ENGLISH TOOLTIPS FOR METRICS
==================================================

Add short, plain-English tooltips (title attributes or a simple tooltip component) for confusing metrics wherever they appear (cards, tables, charts).

Examples:

- “Avg burn”: “Average calories burned per day over this period.”
- “Avg deficit”: “Average calories eaten minus calories burned per day. Negative = calorie deficit.”
- “Avg weight”: “Average body weight across this period.”
- “7-day rolling balance”: “Each point is the average calorie balance over the last 7 days, smoothing daily ups and downs.”
- Daily metrics form:
  - “Total Calories Burned”: “Total energy expenditure for this day (resting + activity).”
  - “Protein Target (g)”: “Recommended daily protein based on roughly 2 g per kg body weight.”
  - “Mode: Maintenance”: “Target roughly equals your recent average burn; aim to maintain weight.”
  - “Mode: Standard Loss”: “Target roughly 15% below your recent average burn for moderate weight loss.”

You may add similar tooltips for any other advanced metric.

==================================================
5. KEEP THE CURRENT VISUAL LAYOUT, JUST WIRE UP THE BEHAVIOUR
==================================================

Do not redesign the entire UI again. Keep the current cards, Today/History tabs and charts. Just:

- Add the “Clear this day” button.
- Implement dynamic targets based on rolling burn as described.
- Make the daily metrics form auto-save and refresh summary.
- Add the tooltips.

After changing the code, run the app and ensure:

- Clearing a day actually removes metrics and food entries for that date.
- Changing burn, mode or settings changes the daily target and summary according to rolling average burn.
- Editing metrics or food entries causes the numbers and summary to update without manually clicking Save.
- Tooltips appear on hover for the key metrics.
